# 動画パフォーマンス評価のロジック

## 概要

この文書では、YouTube動画パフォーマンス分析セクションにおける「高め」「平均的」などの評価表示に関する論理的な算出ロジックについて説明します。ユーザーがより客観的でデータドリブンな評価を得られるよう、統計的手法に基づいた判定基準を提供します。

## 現状の課題

現在の実装では、以下のような固定閾値に基づいて評価を表示しています：

```javascript
const ranges = {
  views: [1000, 5000, 10000, 50000, 100000],
  likes: [100, 500, 1000, 5000, 10000],
  comments: [10, 50, 100, 500, 1000],
  spread: [0.5, 1, 2, 5, 10]
}
```

この方法には以下の課題があります：

1. 固定閾値は全てのチャンネルに一律に適用されるため、チャンネルごとの特性や規模を考慮していない
2. 時間の経過によってYouTube全体のパフォーマンス基準が変化しても対応できない
3. データの実際の分布を考慮していないため、評価が歪んでいる可能性がある

## 新しい評価ロジック

### 基本原則

1. **相対評価の採用**: チャンネル自身のデータに基づく相対評価を行う
2. **ガウス分布の活用**: 値の分布を正規分布（ガウス分布）と見なして評価する
3. **標準偏差の利用**: パフォーマンスの散らばり具合を標準偏差で評価する
4. **異常値の除外**: 極端な外れ値が評価に過度に影響しないよう処理する

### 具体的な算出方法

#### 1. データの前処理

- データセットから極端な外れ値（上位下位1%など）を除外する
- 必要に応じてデータを正規化する（対数変換など）

#### 2. 統計値の計算

- 平均値（μ）: データの中心傾向を示す
- 標準偏差（σ）: データのばらつきを示す
- データの最小値と最大値

#### 3. 評価の区分け

標準偏差（σ）を用いて、以下のように区分けします：

| 範囲                | 評価     | 該当する割合（理論値） |
|---------------------|----------|----------------------|
| μ - 2σ未満         | 低め     | 約2.3%               |
| μ - 2σ以上 μ - 1σ未満 | やや低め | 約13.6%              |
| μ - 1σ以上 μ + 1σ未満 | 平均的   | 約68.2%              |
| μ + 1σ以上 μ + 2σ未満 | やや高め | 約13.6%              |
| μ + 2σ以上         | 高め     | 約2.3%               |

#### 4. 評価の信頼性

データサンプル数が少ない場合（例：10未満）は、統計的に信頼できる評価ができないため、評価表示自体を行いません。この場合、「データ不足」と表示するか、評価自体を表示しません。

### 異なる指標ごとの考慮事項

#### 再生回数（Views）

- 動画の公開からの経過時間を考慮（新しい動画は評価対象から除外または補正）
- チャンネル登録者数との比率も考慮可能

#### 高評価数（Likes）

- 再生回数に対する比率（エンゲージメント率）も考慮
- 公開からの経過時間による補正

#### コメント数（Comments）

- 再生回数に対する比率も考慮
- 動画カテゴリや内容によって傾向が大きく異なる点を考慮

#### 拡散率（Spread Rate）

- 計算方法の明確化（再生数÷チャンネル登録者数など）
- 指標の性質上、分布が歪む可能性があるため対数変換を検討

## 実装上の注意点

1. パフォーマンス計算はクライアントサイドで行うため、計算負荷を考慮する
2. 異常値の処理には計算コストがかかるため、効率的なアルゴリズムを使用する
3. データ不足時の表示/非表示の切り替えをスムーズに行う
4. 将来的には、同カテゴリのYouTubeチャンネル全体の統計データとの比較も検討

## メンテナンス計画

- 半年に一度、閾値や評価ロジックの見直しを行う
- ユーザーフィードバックを収集し、評価精度の向上に活かす
- 新しい指標の追加を検討（CTR、視聴維持率など） 